<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Domanda x la mia nicaredda</title>
  <style>
    /* Definizione del font personalizzato: cuori2.ttf */
    @font-face {
      font-family: 'cuori2';
      src: url('cuori2.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding-top: 10px;
      background-color: #ffe6e6; /* Sfondo ripristinato */
      font-family: 'cuori2', Arial, sans-serif;
      overflow-x: hidden;
    }
    /* Animazione Bounce per il titolo della landing page */
    @keyframes bounceIn {
      0% { transform: scale(0.5); opacity: 0; }
      60% { transform: scale(1.05); opacity: 1; }
      80% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }
    /* Animazione fadeIn per le GIF e per il titolo della main page */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Animazione popIn per il testo "Ti Amo" */
    @keyframes popIn {
      0% { transform: scale(0.5); opacity: 0; }
      60% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); }
    }
    .pop-in {
      animation: popIn 0.8s ease-out;
    }
    h1 {
      font-family: 'cuori2', Arial, sans-serif;
      font-size: 4.5rem;
      color: #ff4d4d;
      margin: 10px 0 30px;
      text-align: center;
      max-width: 90vw;
      word-wrap: break-word;
    }
    /* Stili per la landing page */
    #landing-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100vh;
    }
    /* Applica l'animazione Bounce al titolo della landing page */
    #landing-page h1 {
      animation: bounceIn 1s ease;
    }
    /* Tasto della landing page */
    #landing-btn {
      background-color: #e3445c;
      color: #fff;
      margin-top: 20px; /* Maggior spazio sotto il titolo */
      border: none;
      border-radius: 8px;
      padding: 25px 50px;
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    #landing-btn:hover {
      transform: scale(1.1);
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    }
    /* Pulsanti nella main page */
    .button {
      font-family: 'cuori2', Arial, sans-serif;
      padding: 10px 10px;
      font-size: 2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      transform-origin: center;
      flex-shrink: 0;
    }
    /* Colori per i pulsanti della main page */
    #yes-btn {
      background-color: #f06b74; /* leggermente piÃ¹ chiaro */
      color: #fff;
    }
    #no-btn {
      background-color: #d13f50; /* leggermente piÃ¹ scuro */
      color: #fff;
    }
    .button:hover {
      transform: scale(1.1);
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    }
    /* Contenitore per la gif dei baci (ulteriormente ridotto) */
    #gif-container1 {
      width: 90vw !important;
      max-width: 220px;
      margin-bottom: 10px;
      animation: fadeIn 1s ease-in-out;
    }
    #gif-container1 img {
      width: 100% !important;
      height: auto !important;
      object-fit: cover;
      display: block;
      margin: 0 auto;
      padding: 0;
    }
    /* Contenitore per la gif yippie (ulteriormente ridotto) */
    #gif-container2 {
      width: 90vw !important;
      max-width: 220px;
      margin-bottom: 10px;
      animation: fadeIn 1s ease-in-out;
    }
    #gif-container2 img {
      width: 100% !important;
      height: auto !important;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }
    /* Layout della main page: uso flex per distribuire verticalmente gli elementi e garantire che i pulsanti siano sempre visibili */
    #main-page {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      height: 100vh;
      padding: 20px;
      box-sizing: border-box;
    }
    /* Animazione per il titolo della main page */
    #main-page h1 {
      animation: fadeIn 1s ease-out;
    }
    /* I pulsanti sono ora impilati verticalmente */
    .button-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      justify-content: center;
      width: 100%;
      max-width: 220px;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-title {
      animation: slideIn 0.5s ease forwards;
    }
    /* Media query per dispositivi piÃ¹ piccoli */
    @media (max-width: 500px) {
      h1 {
        font-size: 3rem;
      }
      .button, #landing-btn {
        padding: 20px 30px;
        font-size: 1.75rem;
      }
    }
  </style>
</head>
<body>
  <!-- Elementi audio (nascosti ma presenti nel DOM) -->
  <audio id="bg-music-initial" loop style="width:0; height:0; opacity:0; position:absolute;">
    <source src="forever.mp3" type="audio/mpeg">
    Il tuo browser non supporta l'elemento audio.
  </audio>
  <audio id="bg-music-yes" loop style="width:0; height:0; opacity:0; position:absolute;">
    <source src="yippie.mp3" type="audio/mpeg">
    Il tuo browser non supporta l'elemento audio.
  </audio>

  <!-- Landing Page -->
  <div id="landing-page">
    <h1>Ciao Amore!!7</h1>
    <button id="landing-btn" class="button">Ciao patators!!</button>
  </div>

  <!-- Main Page (nascosta inizialmente) -->
  <div id="main-page">
    <h1>Will you be my Valentine?ðŸ’š</h1>
    <!-- Contenitore per la gif dei baci: inizialmente mostra baci1.gif -->
    <div id="gif-container1">
      <img id="first-gif" src="baci1.gif" alt="Baci GIF">
    </div>
    <!-- Contenitore per la gif yippie: inizialmente vuoto -->
    <div id="gif-container2"></div>
    
    <div class="button-container" id="button-container">
      <button id="yes-btn" class="button">SziðŸ’š</button>
      <button id="no-btn" class="button">Mi uncia</button>
    </div>
  </div>

  <script>
    // Gestione della landing page
    const landingBtn = document.getElementById('landing-btn');
    const landingPage = document.getElementById('landing-page');
    const mainPage = document.getElementById('main-page');
    const initialMusic = document.getElementById('bg-music-initial');

    landingBtn.addEventListener('click', () => {
      if (initialMusic.paused) {
        initialMusic.play().catch((error) =>
          console.log("Errore nella riproduzione di forever.mp3:", error)
        );
      }
      landingPage.style.display = 'none';
      mainPage.style.display = 'flex';
    });

    // Gestione della pagina principale
    const yesButton = document.getElementById('yes-btn');
    const noButton = document.getElementById('no-btn');
    const mainTitle = mainPage.querySelector('h1'); // Titolo principale ("Will you be my Valentine?ðŸ’š")
    const gifContainer1 = document.getElementById('gif-container1'); // Contenitore per i baci
    const firstGifImg = document.getElementById('first-gif');   // L'immagine dei baci
    const gifContainer2 = document.getElementById('gif-container2'); // Contenitore per yippie
    const buttonContainer = document.getElementById('button-container');
    const yesMusic = document.getElementById('bg-music-yes');

    let yesScale = 1;
    let noScale = 1;
    let noPressCount = 0;
    // Array delle gif per i baci: l'indice 0 Ã¨ baci1.gif (giÃ  visualizzata)
    const baciGifs = ["baci1.gif", "baci2.gif", "baci3.gif", "baci4.gif"];

    noButton.addEventListener('click', () => {
      noPressCount++;
      if (noPressCount === 1) {
        noButton.innerText = "Per favoreðŸ¥º";
      } else if (noPressCount === 2) {
        noButton.innerText = "Ti prego";
      } else if (noPressCount === 3) {
        noButton.innerText = "Ti supplico amore";
      } else if (noPressCount === 4) {
        noButton.innerText = "E come dobbiamo fare?";
      } else if (noPressCount === 5) {
        noButton.innerText = "Atroce";
      } else if (noPressCount === 6) {
        noButton.innerText = "Subita";
      } else if (noPressCount >= 7) {
        noButton.innerText = "Subita Max";
      }
      // Aggiorna la scala dei bottoni
      noScale *= (1 / 1.3);
      noButton.style.transform = `scale(${noScale})`;
      yesScale *= 1.3;
      yesButton.style.transform = `scale(${yesScale})`;
      // Se noPressCount Ã¨ minore o uguale a 3, cambia la gif; da 4 in poi, rimane su baci4.gif.
      if (noPressCount <= 3) {
        if (noPressCount === 3) {
          // Forza un refresh per evitare il bug al terzo click
          firstGifImg.src = "";
          setTimeout(() => {
            firstGifImg.src = baciGifs[3];
          }, 100);
        } else {
          firstGifImg.src = baciGifs[noPressCount];
        }
      } else {
        firstGifImg.src = baciGifs[3];
      }
    });

    yesButton.addEventListener('click', () => {
      if (initialMusic) {
        initialMusic.pause();
      }
      if (yesMusic) {
        yesMusic.currentTime = 0;
        yesMusic.play().then(() => {
          console.log("yippie.mp3 sta suonando.");
        }).catch((error) => {
          console.log("Errore nella riproduzione di yippie.mp3:", error);
        });
      }
      mainTitle.textContent = "YIPPIIEEE!";
      mainTitle.style.fontSize = "3rem";
      mainTitle.style.whiteSpace = "nowrap";
      mainTitle.style.overflow = "hidden";
      mainTitle.classList.add("animate-title");
      // Nascondi la gif dei baci
      gifContainer1.style.display = 'none';
      // Mostra la gif yippie nel secondo contenitore
      gifContainer2.innerHTML = `<img src="yippie.gif" alt="Yippie GIF">`;
      // Aggiungi il testo "Ti Amo" sotto la gif yippie con animazione pop-in
      const loveText = document.createElement('div');
      loveText.innerText = "Ti AmoðŸ’šðŸ’šðŸ’š";
      loveText.style.fontSize = "12vw"; // Aumentato
      loveText.style.whiteSpace = "nowrap";
      loveText.style.textAlign = "center";
      loveText.style.margin = "5px auto";  // Margine centrato
      loveText.style.fontFamily = "'cuori2', Arial, sans-serif";
      loveText.style.color = "#ff4d4d";
      // Assicurati che il testo sia centrato durante l'animazione
      loveText.style.display = "block";
      loveText.style.width = "100%";
      loveText.style.transformOrigin = "center";
      loveText.classList.add('pop-in');
      gifContainer2.appendChild(loveText);
      yesButton.style.transform = "scale(1)";
      noButton.style.transform = "scale(1)";
      buttonContainer.innerHTML = "";
    });
  </script>
</body>
</html>
